/** @file
*
*  SPDX-FileCopyrightText: Copyright (c) 2020-2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
*
*  SPDX-License-Identifier: BSD-2-Clause-Patent
*
**/

#ifndef __T264_DEFINES_H__
#define __T264_DEFINES_H__

#include <T264/T264BLParams.h>

// GIC
#define T264_GIC_DISTRIBUTOR_BASE         0x08146000000
#define T264_GIC_REDISTRIBUTOR_BASE       0x08146080000
#define T264_GIC_REDISTRIBUTOR_INSTANCES  32

#define T264_GIC_ITS_BASE  0x08146040000

// BL CARVEOUT OFFSET
#define T264_BL_CARVEOUT_OFFSET  OFFSET_OF(TEGRA_CPUBL_PARAMS, CarveoutInfo[CARVEOUT_UEFI])

// Fuse registers
#define T264_FUSE_BASE  0x00001000000ULL

#define T264_FUSE_NO_SHIFT  0

// Platform CPU Floorsweeping fuse offsets from T264_FUSE_BASE
#define T264_CPU_FLOORSWEEPING_DISABLE_OFFSET_0  0x314
#define T264_CPU_FLOORSWEEPING_DISABLE_OFFSET_1  MAX_UINT32
#define T264_CPU_FLOORSWEEPING_DISABLE_OFFSET_2  MAX_UINT32

// Platform CPU Floorsweeping fuse masks
#define T264_CPU_FLOORSWEEPING_DISABLE_MASK_0  0xFFFFC000
#define T264_CPU_FLOORSWEEPING_DISABLE_MASK_1  MAX_UINT32
#define T264_CPU_FLOORSWEEPING_DISABLE_MASK_2  MAX_UINT32

// MGBE fuse
#define T264_FUSE_MGBE_DISABLE_OFFSET         0x844
#define T264_FUSE_MGBE_DISABLE_CHANNEL_COUNT  4
#define T264_FUSE_MGBE_DISABLE_MASK           0xf
#define T264_FUSE_MGBE_DISABLE_BIT(Channel)  (BIT0 << (Channel))

// PVA fuse
#define T264_FUSE_PVA_DISABLE_OFFSET  0x4e8
#define T264_FUSE_PVA_DISABLE_MASK    BIT0

// Display fuse
#define T264_FUSE_DISPLAY_DISABLE_OFFSET  0x6a4
#define T264_FUSE_DISPLAY_DISABLE_MASK    BIT0

// Audio fuse offset
#define T264_FUSE_AUDIO_DISABLE_OFFSET  0xce4
#define T264_FUSE_AUDIO_DISABLE_MASK    BIT0

// HWPM fuse offset
#define T264_FUSE_HWPM_DISABLE_OFFSET  0xd18
#define T264_FUSE_HWPM_DISABLE_MASK    BIT0

// VIC fuse
#define T264_FUSE_VIC_DISABLE_OFFSET  0xf40
#define T264_FUSE_VIC_DISABLE_MASK    BIT0

// UPHY fuse block for PCIe
#define T264_UPHY0_FUSE_BASE                    0xA801000000
#define T264_PCIE_FLOORSWEEPING_DISABLE_OFFSET  0x238

// PCI-e floorsweeping fuse mask for C1-C5, C0 not fused
#define T264_PCIE_FLOORSWEEPING_DISABLE_MASK  0xFFFFFFE0

// Prod mode fuse
#define T264_FUSE_PROD_MODE_OFFSET   0x100
#define T264_FUSE_PROD_MODE_ENABLED  BIT0

// misc fuses
#define T264_FUSE_ATE_PRIV_1_OFFSET  0x264
#define T264_FUSE_ATE_PRIV_2_OFFSET  0x6e0

// MISC
#define T264_MISC_REG_BASE          0x100000
#define T264_PRESIL_GPU_ENABLE_REG  0x103160

// VPR
#define T264_MEMORY_CONTROLLER_BASE         0x8108020000ULL
#define T264_MC_VIDEO_PROTECT_BOM_0         0xbf04
#define T264_MC_VIDEO_PROTECT_SIZE_MB_0     0xbf08
#define T264_MC_VIDEO_PROTECT_BOM_ADR_HI_0  0xbf0c

// PCIE
#define T264_PCIE_ADDRESS_BITS  49

// Scratch registers
#define T264_SCRATCH_BASE  0x0c980000

#define T264_BOOT_CHAIN_REGISTER_OFFSET             0x67c
#define T264_BOOT_CHAIN_REGISTER                    (T264_SCRATCH_BASE + T264_BOOT_CHAIN_REGISTER_OFFSET)
#define T264_BOOT_CHAIN_BR_FAIL_BITMAP_FIELD_LO     0
#define T264_BOOT_CHAIN_BR_FAIL_BITMAP_FIELD_HI     2
#define T264_BOOT_CHAIN_BR_FAIL_BITMAP_UNUSED_BIT   3
#define T264_BOOT_CHAIN_BR_BOOT_CHAIN_FIELD_LO      4
#define T264_BOOT_CHAIN_BR_BOOT_CHAIN_FIELD_HI      5
#define T264_BOOT_CHAIN_MB1_FAIL_BITMAP_FIELD_LO    7
#define T264_BOOT_CHAIN_MB1_FAIL_BITMAP_FIELD_HI    10
#define T264_BOOT_CHAIN_MB1_BOOT_CHAIN_FIELD_LO     11
#define T264_BOOT_CHAIN_MB1_BOOT_CHAIN_FIELD_HI     12
#define T264_BOOT_CHAIN_LAST_BOOT_CHAIN_FAILED_BIT  13
#define T264_BOOT_CHAIN_STATUS_GOOD                 0
#define T264_BOOT_CHAIN_STATUS_BAD                  1
#define T264_BOOT_CHAIN_MAX                         2

#define T264_RECOVERY_BOOT_REGISTER  (T264_SCRATCH_BASE + 0x684)
#define T264_RECOVERY_BOOT_BIT       1

#define T264_ROOTFS_REGISTER  (T264_SCRATCH_BASE + 0x6cc)

#endif //__T264_DEFINES_H__
